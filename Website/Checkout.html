<html>
	<head>
		<title>GMIT-Games</title>
		<!-- Drop Down Styling -->
		<link rel="stylesheet"	type="text/css" href="Scripts/Dropdown.css"/>
		
		<!-- Header -->
		<link rel="stylesheet"	type="text/css" href="Scripts/Header.css"/>
		
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
		
		<!-- Checkout CSS -->
		<link rel="stylesheet"	type="text/css" href="Scripts/Checkout.css"/>
	</head>
	<body>
<!-- Start of Header Menu (C.McGr)-->
<div class="navbar navbar-expand-lg navbar-light .bg-light" id="Header">
	<img src="Images/Logo.png">
	<div class="container-fluid">
					<a class="text-dark navbar-brand" href="Home.html">Home</a>
					
					<!-- Something to do with short browser width and it turns the bar into a drop down. -->
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

				<div class="collapse navbar-collapse" id="navbarNav">
				<!-- Navigation bar -->
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					
					<!-- Drop Down -->
					<div class="dropdown">
						<button class="dropbtn" id="buttonDropDownMenu">Browse</button>
						<div class="dropdown-content">
							<a href="GenreGames/Action.html">Action</a>
							<a href="GenreGames/Adventure.html">Adventure</a>
							<a href="GenreGames/MMO.html">MMO Games</a>
							<a href="GenreGames/Racing.html">Racing</a>
							<a href="GenreGames/Strategy.html">Strategy</a>
						</div>
					</div>
					
						<!-- Whats on sale -->
						<li class="navbar-item">
							<a class="nav-link text-dark navbar-brand" href="WhatsOnSale.html">What's On Sale</a>
						</li>
						
						<!-- Best Sellers -->
						<li class="navbar-item">
							<a class="nav-link text-dark navbar-brand" id="bestSellerItemMenu" href="BestSellers.html">Best Sellers</a>
						</li>
						
						<!-- User Panel -->
						<li class="navbar-item">
							<a class="nav-link text-dark navbar-brand" href="Login.html">User Panel</a>
						</li>
						
						<li class="navbar-item">
							<a href="Cart.html">
								<img src="Images/Cart.png" class="nav-link text-dark navbar-brand" id="cart">
							</a>
						</li>
						
						<!-- DOM -->
						<li class="navbar-item" id="logout">
							
						</li>

					</ul>
					<div id="welcomeMessage"></div>
				</div>
	</div>
</div>
<!-- End of Header Menu -->
<div class="row">
  <div class="col-75">
    <div class="container">
      <form action="Confirmed.html">
      
        <div class="row">
          <div class="col-50">
            <h3>Billing Address</h3>
            <label for="fname"><i class="fa fa-user"></i> Full Name</label>
            <input type="text" id="fname" name="firstname" placeholder="John M. Doe" required>
            <label for="email"><i class="fa fa-envelope"></i> Email</label>
            <input type="email" id="email" name="email" placeholder="john@example.com" required>
            <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
            <input type="text" id="adr" name="address" placeholder="542 W. 15th Street" required>
            <label for="city"><i class="fa fa-institution"></i> City</label>
            <input type="text" id="city" name="city" placeholder="Dublin" required>

            <div class="row">
              <div class="col-50">
                <label for="state">County</label>
                <input type="text" id="state" name="state" placeholder="Galway" required>
              </div>
              <div class="col-50">
                <label for="zip">Zip</label>
                <input type="text" id="zip" name="zip" placeholder="H54 F394" maxlength="8" required>
              </div>
            </div>
          </div>

          <div class="col-50">
            <h3>Payment</h3>
            <img src="images/e.jpg" style="height: 106px;">
            <label for="cname">Name on Card</label>
            <input type="text" id="cname" name="cardname" placeholder="John More Doe" required>
            <label for="ccnum">Credit card number</label>
            <input type="number" id="ccnum" name="cardnumber" placeholder="1111-2222-3333-4444" maxlength="16" pattern="[0-9\s]{13,19}" required>
            <label for="expmonth">Exp Month</label>
            <input type="text" id="expmonth" name="expmonth" placeholder="September" required>
            <div class="row">
              <div class="col-50">
                <label for="expyear">Exp Year</label>
                <input type="tel" id="expyear" name="expyear" placeholder="2022" maxlength="4" required>
              </div>
              <div class="col-50">
                <label for="cvv">CVV</label>
                <input type="tel" id="cvv" name="cvv" placeholder="352" maxlength="3" required>
              </div>
            </div>
          </div>
          
        </div>
       <a href="Confirmation"><input type="submit" value="Pay" class="btn"> </a>
      </form>
    </div>
  </div>
  
  <div class="col-25">
    <div class="container">
      <h4>Cart <span class="price" style="color:black"><i class="fa fa-shopping-cart"></i></span></h4>
      <hr>
	  <h3 id="totalPrice">Total : €0.00</h3>
	  <input type="text" id="discountCode" placeholder="Discount Code">
	  <button class="btn btn-primary" onclick="checkCoupon()">Apply Discount Code</button>
    </div>
  </div>
</div>

</body>
	<script>
		let totalValue = localStorage.getItem('totalValue');
		let totalPriceDOM = document.getElementById("totalPrice");
		totalPriceDOM.innerHTML = "Total :  €" + totalValue;
		
		var couponCodes = ["gmit2020", "cian", "adrian"];
		let isCouponApplied = 0;
		sessionStorage.setItem('CouponApplied', 'yy');
		function checkCoupon()
	{
		let couponInput = document.getElementById("discountCode").value;
		let inputLowerCase = couponInput.toLowerCase();
		let couponValue = sessionStorage.getItem('CouponApplied');
		
		if (couponValue != 'xx')
		{
		for(var i = 0; i < couponCodes.length; i++)
			{
			
				if (inputLowerCase == couponCodes[i])
				{
					isCouponApplied = 1;
				}
			}
				if (isCouponApplied == 0)
				{
					alert("Not a valid Coupon Code!");
				}
				
				if (isCouponApplied == 1)
				{
					alert("Coupon has been applied!");
					totalValue = (totalValue*0.90);
					totalPriceDOM.innerHTML = "Total After Discount :  €" + Math.round(totalValue* 100)/ 100;
					sessionStorage.setItem('CouponApplied', 'xx');
				}
		}

		if(couponValue == 'xx')
		{
			alert("Coupon already applied!")
		}
	}
	</script>
</html>
